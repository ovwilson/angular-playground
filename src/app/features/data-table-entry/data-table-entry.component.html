 {{modelForm.value | json}}
<mat-card>

    <mat-card-content>

        <div fxLayout="row" fxLayoutGap="20px">

            <div fxLayout="column">

                <ng-container *ngFor="let model of modelGroup">
                    <form [formGroup]="modelForm">
                        <div [ngSwitch]="model?.type">
                            <ng-template ngSwitchCase="text">
                                <mat-form-field>
                                    <input matInput [formControlName]="model?.name" [id]="model?.name" [name]="model?.name" [placeholder]="model?.label">
                                </mat-form-field>
                            </ng-template>
                            <ng-template ngSwitchCase="textarea">
                                <mat-form-field>
                                    <textarea matInput [formControlName]="model?.name" [placeholder]="model?.label" matTextareaAutosize matAutosizeMinRows="2"
                                        matAutosizeMaxRows="5"></textarea>
                                </mat-form-field>
                            </ng-template>
                            <ng-template ngSwitchDefault>...</ng-template>
                        </div>
                    </form>
                </ng-container>

                <button mat-icon-button [disabled]="!modelForm.valid" (click)="add()">
                    <mat-icon>add_circle</mat-icon> Add</button>

            </div>

            <app-data-table fxFlex [modelGroup]="modelGroup" [models]="models"></app-data-table>

        </div>
    </mat-card-content>

</mat-card>

<form>



</form>